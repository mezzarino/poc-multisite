'use client'
"use strict";var g=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var N=(i,t)=>{for(var a in t)g(i,a,{get:t[a],enumerable:!0})},b=(i,t,a,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of w(t))!y.call(i,s)&&s!==a&&g(i,s,{get:()=>t[s],enumerable:!(n=f(t,s))||n.enumerable});return i};var R=i=>b(g({},"__esModule",{value:!0}),i);var x=(i,t,a)=>new Promise((n,s)=>{var h=o=>{try{r(a.next(o))}catch(l){s(l)}},m=o=>{try{r(a.throw(o))}catch(l){s(l)}},r=o=>o.done?n(o.value):Promise.resolve(o.value).then(h,m);r((a=a.apply(i,t)).next())});var v={};N(v,{CurrencyWidget:()=>S});module.exports=R(v);var p=require("react");var e=require("react/jsx-runtime"),S=i=>{let[t,a]=(0,p.useState)([]),[n,s]=(0,p.useState)(!0),h=()=>{let c=localStorage.getItem("exchangeRates");if(c){let u=JSON.parse(c),d=u.time;new Date().getTime()-d<=15*60*1e3?(a(u.data),s(!1)):(localStorage.removeItem("exchangeRates"),m())}else m()},m=()=>x(void 0,null,function*(){let c=yield fetch("/api/exchangerates");if(!c.ok)throw new Error("Failed to fetch exchange rates");let u=yield c.json(),d={time:new Date().getTime(),data:u};localStorage.setItem("exchangeRates",JSON.stringify(d)),a(u),s(!1)}),r=(0,e.jsx)("tr",{className:"ui-border-b",children:(0,e.jsx)("th",{scope:"row",colSpan:3,className:"ui-whitespace-nowrap ui-px-6 ui-py-4 ui-font-medium",children:"Loading rates..."})}),o=t.map(c=>(0,e.jsxs)("tr",{className:"ui-border-b",children:[(0,e.jsx)("th",{scope:"row",className:"ui-whitespace-nowrap ui-px-6 ui-py-4 ui-font-medium",children:c.country}),(0,e.jsx)("td",{className:"ui-px-6 ui-py-4",children:c.currency}),(0,e.jsx)("td",{className:"ui-px-6 ui-py-4",children:c.rate})]},c.id)),l=n?r:o;return(0,p.useEffect)(()=>{h()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"ui-h-full ui-p-4",children:(0,e.jsx)("p",{className:"ui-inline-block ui-text-xl",children:"This is an example widget, which is shared across funnel, customer and external website projects."})}),(0,e.jsx)("div",{className:"ui-sm:rounded-lg ui-relative ui-overflow-x-auto ui-shadow-md",children:(0,e.jsxs)("table",{className:"ui-w-full ui-text-left ui-text-sm",children:[(0,e.jsx)("thead",{className:"ui-text-xsui-uppercase",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"ui-px-6 ui-py-3",children:"Country"}),(0,e.jsx)("th",{scope:"col",className:"ui-px-6 ui-py-3",children:"Currency"}),(0,e.jsx)("th",{scope:"col",className:"ui-px-6 ui-py-3",children:"Sell Rate"})]})}),(0,e.jsx)("tbody",{children:l})]})})]})};0&&(module.exports={CurrencyWidget});
